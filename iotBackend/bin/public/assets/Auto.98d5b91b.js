import{x as de,y as ve,U as Me,c as I,z as m,A as h,B as u,C as _,D as q,N as p,m as e,ak as G,M as z,as as ae,p as be,I as Z,l as ue,v as Y,w as S,a2 as Ee,n as _e,q as Fe,s as Re,t as ne,ae as fe,aq as De,X as me,Y as pe,Z as ze,aS as Be,d as Ne,r as j,i as qe,e as Oe,F as Te,a3 as Le,a as se,ao as ye,al as E}from"./index.d0053bb4.js";import{G as Ge,D as X,v as ee,k as O,a as re,a7 as je,m as Ie,z as we,a8 as Ke,R as He,b as Xe,x as Je,c as Qe,a9 as We,d as Ye,Q as Ze,aa as el,f as ll,J as al,A as ul,g as tl,h as nl,ab as sl,ac as ol,T as il,M as dl,$ as rl,i as Q,N as Ve,W as cl,n as W}from"./VListItem.428bcc22.js";import{b as x,h as v,l as J,g as ie,f as Ae,m as ml,n as vl,o as fl,p as $e,u as pl,q as he,r as ke,s as Ue,t as yl,v as Vl,e as le,w as hl,c as kl,a as Cl,i as Ce,d as oe,j as gl}from"./VDialog.ee009ef1.js";import{m as bl,u as El,V as _l,a as ge}from"./VList.ec693e54.js";const Fl=Ge("flex-grow-1","div","VSpacer"),Dl={name:""},Bl=de({...Dl,props:{trigger:null,index:null},setup(l){const g=l,i=ve(),{trigger:f}=Me(g),o=()=>{let t=0;i.automationRules.triggers.forEach(c=>{t++,c.id==f.value.id&&i.automationRules.triggers.splice(t-1,1)})},D=I(()=>t=>{if(t.type==1){const c=Math.floor(t.value/60),V=Math.floor(t.value%60),d=`${c}:${V}`;if(t.compare==2){const b=Math.floor(t.value2/60),T=Math.floor(t.value2%60),w=`${b}:${T}`;return`\u5F53 \u65F6\u95F4 \u5728 ${d} \u548C ${w} \u4E4B\u95F4`}else{if(t.compare==-1)return`\u5F53 \u65F6\u95F4 \u5728 ${d} \u4E4B\u524D`;if(t.compare==0)return`\u5F53 \u65F6\u95F4 \u4E3A ${d}`;if(t.compare==1)return`\u5F53 \u65F6\u95F4 \u5728 ${d} \u4E4B\u540E`}}else{const c=t.deviceName,V=t.deviceID;let d="\u8FD0\u884C\u72B6\u6001";switch(t.valueType){case 0:break;case 1:t.deviceType=="fan"?d="\u98CE\u901F":t.deviceType=="light"?d="\u4EAE\u5EA6":t.deviceType=="tv"?d="\u97F3\u91CF":t.deviceType=="sensor"?d="\u6E29\u5EA6":d="value";break;case 2:t.deviceType=="fan"?d="\u6A21\u5F0F":t.deviceType=="tv"?d="\u9891\u9053":t.deviceType=="sensor"?d="\u6E7F\u5EA6":d="value2";break;case 3:t.deviceType=="sensor"?d="pm2.5":d="value3";break;case 4:t.deviceType=="light"?d="\u989C\u8272":d="value3";break}if(t.compare==2)return`\u5F53 ${c} (ID${V}) \u7684${d} \u5728 ${t.value} \u548C ${t.value2} \u4E4B\u95F4`;if(t.compare==-1)return`\u5F53 ${c} (ID${V}) \u7684${d} \u5C0F\u4E8E ${t.value}`;if(t.compare==0)return`\u5F53 ${c} (ID${V}) \u7684${d} \u4E3A ${t.value}`;if(t.compare==1)return`\u5F53 ${c} (ID${V}) \u7684${d} \u5927\u4E8E ${t.value}`}}),F=I(()=>t=>{const c=t.deviceName,V=t.deviceID;let d="\u8FD0\u884C\u72B6\u6001";switch(t.valueType){case 0:break;case 1:t.deviceType=="fan"?d="\u98CE\u901F":t.deviceType=="light"?d="\u4EAE\u5EA6":t.deviceType=="tv"?d="\u97F3\u91CF":t.deviceType=="sensor"?d="\u6E29\u5EA6":d="value";break;case 2:t.deviceType=="fan"?d="\u6A21\u5F0F":t.deviceType=="tv"?d="\u9891\u9053":t.deviceType=="sensor"?d="\u6E7F\u5EA6":d="value2";break;case 3:t.deviceType=="sensor"?d="pm2.5":d="value3";break;case 4:t.deviceType=="light"?d="\u989C\u8272":d="value3";break}return`\u5C06 ${c} (ID${V}) \u7684 ${d} \u8BBE\u7F6E\u4E3A ${t.value}`});return(t,c)=>(m(),h(ie,{hover:"",elevation:"12",rounded:"","min-height":"550"},{title:u(()=>[_(q(p(f).name),1)]),subtitle:u(()=>[e(X,{color:p(f).enabled?"success":"error",icon:p(f).enabled?"mdi-check-circle":"mdi-minus-circle"},null,8,["color","icon"]),_(" "+q(p(f).enabled?"\u5DF2\u542F\u7528":"\u5DF2\u7981\u7528")+" ",1),e(X,{color:p(f).met?"success":"error",icon:p(f).met?"mdi-check-circle":"mdi-minus-circle"},null,8,["color","icon"]),_(" "+q(p(f).met?"\u5DF2\u89E6\u53D1":"\u672A\u89E6\u53D1"),1)]),text:u(()=>[e(x,null,{default:u(()=>[e(v,{class:"font-weight-bold",cols:"12"},{default:u(()=>[_(q(p(f).condition.mode=="and"?"\u4EE5\u4E0B\u6761\u4EF6\u540C\u65F6\u6EE1\u8DB3:":"\u4EE5\u4E0B\u6761\u4EF6\u4EFB\u4E00\u6EE1\u8DB3:"),1)]),_:1})]),_:1}),e(J,{"grid-list-xs":""},{default:u(()=>[(m(!0),G(z,null,ae(p(f).condition.conditions,V=>(m(),h(x,{key:V.id},{default:u(()=>[e(v,{cols:"12"},{default:u(()=>[e(ie,{variant:"outlined",rounded:"",hover:"",color:V.met?"#94cf96":""},{text:u(()=>[e(x,null,{default:u(()=>[e(v,{cols:"10"},{default:u(()=>[_(q(p(D)(V)),1)]),_:2},1024),e(v,{cols:"2",class:"text-right"},{default:u(()=>[e(X,{color:V.met?"success":"error",icon:V.met?"mdi-check-circle":"mdi-minus-circle"},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024),e(ee)]),_:2},1024))),128))]),_:1}),e(x,null,{default:u(()=>[e(v,{class:"font-weight-bold",cols:"12"},{default:u(()=>[_(" \u6267\u884C\u5982\u4E0B\u64CD\u4F5C: ")]),_:1})]),_:1}),e(J,{"grid-list-xs":""},{default:u(()=>[(m(!0),G(z,null,ae(p(f).actions,V=>(m(),h(x,{key:V.id},{default:u(()=>[e(v,{cols:"12"},{default:u(()=>[e(ie,{variant:"outlined",rounded:"",hover:"",color:p(f).met?"#94cf96":""},{text:u(()=>[e(x,null,{default:u(()=>[e(v,{cols:"12"},{default:u(()=>[_(q(p(F)(V)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024))),128)),e(ee)]),_:1})]),default:u(()=>[e(Ae,null,{default:u(()=>[e(O,{onClick:c[0]||(c[0]=V=>t.$emit("showEditDialog",g.index))},{default:u(()=>[_("\u7F16\u8F91")]),_:1}),e(O,{color:"warning",onClick:o},{default:u(()=>[_("\u5220\u9664")]),_:1})]),_:1})]),_:1}))}});const Tl=be({indeterminate:Boolean,indeterminateIcon:{type:Z,default:"$checkboxIndeterminate"},...ml({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"v-checkbox-btn"),Il=ue()({name:"VCheckboxBtn",props:Tl(),emits:{"update:modelValue":l=>!0,"update:indeterminate":l=>!0},setup(l,g){let{slots:i}=g;const f=Y(l,"indeterminate"),o=Y(l,"modelValue");function D(c){f.value&&(f.value=!1)}const F=I(()=>l.indeterminate?l.indeterminateIcon:l.falseIcon),t=I(()=>l.indeterminate?l.indeterminateIcon:l.trueIcon);return re(()=>e(vl,S(l,{modelValue:o.value,"onUpdate:modelValue":[c=>o.value=c,D],class:"v-checkbox-btn",type:"checkbox",inline:!0,falseIcon:F.value,trueIcon:t.value,"aria-checked":l.indeterminate?"mixed":void 0}),i)),{}}});const xe=Symbol.for("vuetify:v-chip-group");ue()({name:"VChipGroup",props:{column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Ee},...je({selectedClass:"v-chip--selected"}),...Ie(),..._e(),...we({variant:"tonal"})},emits:{"update:modelValue":l=>!0},setup(l,g){let{slots:i}=g;const{themeClasses:f}=Fe(l),{isSelected:o,select:D,next:F,prev:t,selected:c}=Ke(l,xe);return Re({VChip:{color:ne(l,"color"),disabled:ne(l,"disabled"),filter:ne(l,"filter"),variant:ne(l,"variant")}}),re(()=>e(l.tag,{class:["v-chip-group",{"v-chip-group--column":l.column},f.value]},{default:()=>{var V;return[(V=i.default)==null?void 0:V.call(i,{isSelected:o,select:D,next:F,prev:t,selected:c.value})]}})),{}}});const wl=ue()({name:"VChip",directives:{Ripple:He},props:{activeClass:String,appendAvatar:String,appendIcon:Z,closable:Boolean,closeIcon:{type:Z,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Z,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:fe,onClickOnce:fe,...Xe(),...Je(),...Qe(),...We(),...Ye(),...Ze(),...el(),...Ie({tag:"span"}),..._e(),...we({variant:"tonal"})},emits:{"click:close":l=>!0,"update:modelValue":l=>!0,"group:selected":l=>!0,click:l=>!0},setup(l,g){let{attrs:i,emit:f,slots:o}=g;const{t:D}=De(),{borderClasses:F}=ll(l),{colorClasses:t,colorStyles:c,variantClasses:V}=al(l),{densityClasses:d}=ul(l),{elevationClasses:b}=tl(l),{roundedClasses:T}=nl(l),{sizeClasses:w}=sl(l),{themeClasses:N}=Fe(l),y=Y(l,"modelValue"),n=ol(l,xe,!1),a=il(l,i),B=I(()=>l.link!==!1&&a.isLink.value),s=I(()=>!l.disabled&&l.link!==!1&&(!!n||l.link||a.isClickable.value)),A=I(()=>({"aria-label":D(l.closeLabel),onClick(r){y.value=!1,f("click:close",r)}}));function te(r){var k;f("click",r),s.value&&((k=a.navigate)==null||k.call(a,r),n==null||n.toggle())}function ce(r){(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),te(r))}return()=>{const r=a.isLink.value?"a":l.tag,k=!!(l.appendIcon||l.appendAvatar),$=!!(k||o.append),C=!!(o.close||l.closable),P=!!(o.filter||l.filter)&&n,K=!!(l.prependIcon||l.prependAvatar),H=!!(K||o.prepend),M=!n||n.isSelected.value;return y.value&&me(e(r,{class:["v-chip",{"v-chip--disabled":l.disabled,"v-chip--label":l.label,"v-chip--link":s.value,"v-chip--filter":P,"v-chip--pill":l.pill},N.value,F.value,M?t.value:void 0,d.value,b.value,T.value,w.value,V.value,n==null?void 0:n.selectedClass.value],style:[M?c.value:void 0],disabled:l.disabled||void 0,draggable:l.draggable,href:a.href.value,tabindex:s.value?0:void 0,onClick:te,onKeydown:s.value&&!B.value&&ce},{default:()=>{var L,R;return[dl(s.value,"v-chip"),P&&e(rl,{key:"filter"},{default:()=>[me(e("div",{class:"v-chip__filter"},[o.filter?me(e(Q,{key:"filter-defaults",disabled:!l.filterIcon,defaults:{VIcon:{icon:l.filterIcon}}},null),[[pe("slot"),o.filter,"default"]]):e(X,{key:"filter-icon",icon:l.filterIcon},null)]),[[ze,n.isSelected.value]])]}),H&&e("div",{key:"prepend",class:"v-chip__prepend"},[o.prepend?e(Q,{key:"prepend-defaults",disabled:!K,defaults:{VAvatar:{image:l.prependAvatar,start:!0},VIcon:{icon:l.prependIcon,start:!0}}},o.prepend):e(z,null,[l.prependIcon&&e(X,{key:"prepend-icon",icon:l.prependIcon,start:!0},null),l.prependAvatar&&e(Ve,{key:"prepend-avatar",image:l.prependAvatar,start:!0},null)])]),(R=(L=o.default)==null?void 0:L.call(o,{isSelected:n==null?void 0:n.isSelected.value,selectedClass:n==null?void 0:n.selectedClass.value,select:n==null?void 0:n.select,toggle:n==null?void 0:n.toggle,value:n==null?void 0:n.value.value,disabled:l.disabled}))!=null?R:l.text,$&&e("div",{key:"append",class:"v-chip__append"},[o.append?e(Q,{key:"append-defaults",disabled:!k,defaults:{VAvatar:{end:!0,image:l.appendAvatar},VIcon:{end:!0,icon:l.appendIcon}}},o.append):e(z,null,[l.appendIcon&&e(X,{key:"append-icon",end:!0,icon:l.appendIcon},null),l.appendAvatar&&e(Ve,{key:"append-avatar",end:!0,image:l.appendAvatar},null)])]),C&&e("div",S({key:"close",class:"v-chip__close"},A.value),[o.close?e(Q,{key:"close-defaults",defaults:{VIcon:{icon:l.closeIcon,size:"x-small"}}},o.close):e(X,{key:"close-icon",icon:l.closeIcon,size:"x-small"},null)])]}}),[[pe("ripple"),s.value&&l.ripple,null]])}}});const Al=ue()({name:"VMenu",props:{id:String,...Be(fl({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:$e}}),["absolute"])},emits:{"update:modelValue":l=>!0},setup(l,g){let{slots:i}=g;const f=Y(l,"modelValue"),{scopeId:o}=pl(),D=Ne(),F=I(()=>l.id||`v-menu-${D}`),t=j(),c=qe(he,null),V=j(0);Oe(he,{register(){++V.value},unregister(){--V.value},closeParents(){setTimeout(()=>{V.value||(f.value=!1,c==null||c.closeParents())},40)}}),Te(f,T=>{T?c==null||c.register():c==null||c.unregister()});function d(){c==null||c.closeParents()}const b=I(()=>S({"aria-haspopup":"menu","aria-expanded":String(f.value),"aria-owns":F.value},l.activatorProps));return re(()=>{const[T]=ke.filterProps(l);return e(ke,S({ref:t,class:["v-menu"]},T,{modelValue:f.value,"onUpdate:modelValue":w=>f.value=w,absolute:!0,activatorProps:b.value,"onClick:outside":d},o),{activator:i.activator,default:function(){for(var w=arguments.length,N=new Array(w),y=0;y<w;y++)N[y]=arguments[y];return e(Q,{root:!0},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i,...N)]}})}})}),Ue({id:F,\u03A8openChildren:V},t)}}),$l=be({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Z,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:Ee},...bl({itemChildren:!1})},"v-select"),U=ue()({name:"VSelect",props:{...$l(),...Be(yl({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...cl({transition:{component:$e}})},emits:{"update:modelValue":l=>!0,"update:menu":l=>!0},setup(l,g){let{slots:i}=g;const{t:f}=De(),o=j(),D=j(),F=Y(l,"menu"),t=I({get:()=>F.value,set:r=>{var k;F.value&&!r&&((k=D.value)==null?void 0:k.\u03A8openChildren)||(F.value=r)}}),{items:c,transformIn:V,transformOut:d}=El(l),b=Y(l,"modelValue",[],r=>V(Le(r)),r=>{var $;const k=d(r);return l.multiple?k:($=k[0])!=null?$:null}),T=Vl(),w=I(()=>b.value.map(r=>c.value.find(k=>l.valueComparator(k.value,r.value))||r)),N=I(()=>w.value.map(r=>r.props.value)),y=I(()=>l.hideSelected?c.value.filter(r=>!w.value.some(k=>k===r)):c.value),n=j();function a(r){l.openOnClear&&(t.value=!0)}function B(){l.hideNoData&&!c.value.length||l.readonly||(T==null?void 0:T.isReadonly.value)||(t.value=!t.value)}function s(r){var k,$,C,P;l.readonly||(T==null?void 0:T.isReadonly.value)||(["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(r.key)&&r.preventDefault(),["Enter","ArrowDown"," "].includes(r.key)&&(t.value=!0),["Escape","Tab"].includes(r.key)&&(t.value=!1),r.key==="ArrowDown"?(k=n.value)==null||k.focus("next"):r.key==="ArrowUp"?($=n.value)==null||$.focus("prev"):r.key==="Home"?(C=n.value)==null||C.focus("first"):r.key==="End"&&((P=n.value)==null||P.focus("last")))}function A(r){if(l.multiple){const k=N.value.findIndex($=>l.valueComparator($,r.value));if(k===-1)b.value=[...b.value,r];else{const $=[...b.value];$.splice(k,1),b.value=$}}else b.value=[r],t.value=!1}function te(r){var k;(k=n.value)!=null&&k.$el.contains(r.relatedTarget)||(t.value=!1)}function ce(r){var k;r.relatedTarget==null&&((k=o.value)==null||k.focus())}return re(()=>{const r=!!(l.chips||i.chip),k=!!(!l.hideNoData||y.value.length||i.prepend||i.append||i["no-data"]),[$]=le.filterProps(l);return e(le,S({ref:o},$,{modelValue:b.value.map(C=>C.props.value).join(", "),"onUpdate:modelValue":C=>{C==null&&(b.value=[])},validationValue:b.externalValue,dirty:b.value.length>0,class:["v-select",{"v-select--active-menu":t.value,"v-select--chips":!!l.chips,[`v-select--${l.multiple?"multiple":"single"}`]:!0,"v-select--selected":b.value.length}],appendInnerIcon:l.menuIcon,readonly:!0,"onClick:clear":a,"onMousedown:control":B,onBlur:te,onKeydown:s}),{...i,default:()=>e(z,null,[e(Al,S({ref:D,modelValue:t.value,"onUpdate:modelValue":C=>t.value=C,activator:"parent",contentClass:"v-select__content",eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition},l.menuProps),{default:()=>[k&&e(_l,{ref:n,selected:N.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onFocusout:ce},{default:()=>{var C,P,K,H;return[!y.value.length&&!l.hideNoData&&((P=(C=i["no-data"])==null?void 0:C.call(i))!=null?P:e(W,{title:f(l.noDataText)},null)),(K=i["prepend-item"])==null?void 0:K.call(i),y.value.map((M,L)=>{var R;return i.item?(R=i.item)==null?void 0:R.call(i,{item:M,index:L,props:S(M.props,{onClick:()=>A(M)})}):e(W,S({key:L},M.props,{onClick:()=>A(M)}),{prepend:Se=>{let{isSelected:Pe}=Se;return l.multiple&&!l.hideSelected?e(Il,{modelValue:Pe,ripple:!1},null):void 0}})}),(H=i["append-item"])==null?void 0:H.call(i)]}})]}),w.value.map((C,P)=>{var M,L;function K(R){R.stopPropagation(),R.preventDefault(),A(C)}const H={"onClick:close":K,modelValue:!0,"onUpdate:modelValue":void 0};return e("div",{key:C.value,class:"v-select__selection"},[r?i.chip?e(Q,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:C.title}}},{default:()=>{var R;return[(R=i.chip)==null?void 0:R.call(i,{item:C,index:P,props:H})]}}):e(wl,S({key:"chip",closable:l.closableChips,size:"small",text:C.title},H),null):(L=(M=i.selection)==null?void 0:M.call(i,{item:C,index:P}))!=null?L:e("span",{class:"v-select__selection-text"},[C.title,l.multiple&&P<w.value.length-1&&e("span",{class:"v-select__selection-comma"},[_(",")])])])})])})}),Ue({menu:t,select:A},o)}}),Ul=de({__name:"addAuto",props:{mode:null,index:null},emits:["closeDialog"],setup(l,{emit:g}){const i=l,f=ve();let o=se({name:"\u65B0\u89C4\u5219",enabled:!0,id:Math.round(Math.random()*1e4),condition:{mode:"and",conditions:[{}]},actions:[{}]});Te(i,()=>{if(i.mode=="edit"){const y=f.automationRules.triggers[i.index];o=se(y)}else o=se({name:"\u65B0\u89C4\u5219",enabled:!0,id:Math.round(Math.random()*1e4),condition:{mode:"and",conditions:[{}]},actions:[{}]})});const D=I(()=>{const y=[];if(!f.homeStatus.rooms)return y;for(const n of f.homeStatus.rooms)n.devices.length!=0&&(y.push({describe:n.describe,type:"subheader"}),n.devices.forEach(a=>{a.describe+=` (ID${a.id})`}),y.push(...n.devices));return y}),F=(y,n)=>{const a=c(y);!a||(o.condition.conditions[n].deviceName=a.describe,o.condition.conditions[n].deviceType=a.type,o.condition.conditions[n].deviceType=a.type,o.condition.conditions[n].id=Math.round(Math.random()*1e4))},t=(y,n)=>{const a=c(y);!a||(o.actions[n].deviceName=a.describe,o.actions[n].deviceType=a.type,o.actions[n].deviceType=a.type,o.actions[n].id=Math.round(Math.random()*1e4))},c=y=>{for(const n of f.homeStatus.rooms)for(const a of n.devices)if(a.id==y)return a},V=I(()=>y=>{switch(y){case"tv":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u97F3\u91CF",value:1},{title:"\u9891\u9053",value:2}];case"fan":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u98CE\u901F",value:1},{title:"\u6A21\u5F0F",value:2}];case"light":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u4EAE\u5EA6",value:1},{title:"\u989C\u8272",value:4}];case"cam":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0}];case"sensor":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u6E29\u5EA6",value:1},{title:"\u6E7F\u5EA6",value:2},{title:"pm2.5",value:3}];default:return[]}}),d=I(()=>y=>{switch(y){case"tv":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u97F3\u91CF",value:1},{title:"\u9891\u9053",value:2}];case"fan":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u98CE\u901F",value:1},{title:"\u6A21\u5F0F",value:2}];case"light":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0},{title:"\u4EAE\u5EA6",value:1},{title:"\u989C\u8272",value:4}];case"cam":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0}];case"sensor":return[{title:"\u8FD0\u884C\u72B6\u6001",value:0}];default:return[]}}),b=(y,n)=>{const a=y.split(":");o.condition.conditions[n].value=a[0]*60+a[1]*1},T=(y,n)=>{const a=y.split(":");o.condition.conditions[n].value2=a[0]*60+a[1]*1},w=(y,n)=>{o.condition.conditions[n].value=y*10},N=()=>{i.mode=="new"?f.automationRules.triggers.push(o):f.automationRules.triggers.splice(i.index-1,1,o),o=se({name:"\u65B0\u89C4\u5219",enabled:!0,id:Math.round(Math.random()*1e4),condition:{mode:"and",conditions:[{}]},actions:[{}]}),g("closeDialog")};return(y,n)=>(m(),h(gl,{persistent:"",width:"1024"},{default:u(()=>[e(ie,null,{default:u(()=>[e(hl,null,{default:u(()=>[e(x,null,{default:u(()=>[e(v,null,{default:u(()=>[_(q(i.mode),1)]),_:1}),e(v,{cols:"2",class:"d-flex align-center"},{default:u(()=>[e(le,{density:"compact",name:"name",modelValue:p(o).name,"onUpdate:modelValue":n[0]||(n[0]=a=>p(o).name=a),id:"id"},null,8,["modelValue"])]),_:1}),e(v,{cols:"auto"},{default:u(()=>[e(kl,{color:"primary",label:p(o).enabled?"\u542F\u7528":"\u7981\u7528",modelValue:p(o).enabled,"onUpdate:modelValue":n[1]||(n[1]=a=>p(o).enabled=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1}),e(Cl,null,{default:u(()=>[e(J,null,{default:u(()=>[e(x,null,{default:u(()=>[e(v,{cols:"auto",class:"font-weight-bold"},{default:u(()=>[_(" \u6761\u4EF6: ")]),_:1})]),_:1}),e(J,null,{default:u(()=>[(m(!0),G(z,null,ae(p(o).condition.conditions,(a,B)=>(m(),h(x,{key:B},{default:u(()=>[e(v,{cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u8BBE\u5907\u72B6\u6001",value:0},{title:"\u5F53\u524D\u65F6\u95F4",value:1}],"item-title":"title","item-value":"value",label:"\u5982\u679C",modelValue:a.type,"onUpdate:modelValue":s=>a.type=s,modelModifiers:{lazy:!0},required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a.type==0?(m(),G(z,{key:0},[e(v,{cols:"12",sm:"3"},{default:u(()=>[e(U,{items:p(D),"item-title":"describe","item-value":"id",label:"\u9009\u62E9\u8BBE\u5907",modelValue:a.deviceID,"onUpdate:modelValue":[s=>a.deviceID=s,s=>F(a.deviceID,B)],required:""},{item:u(({item:s,props:A})=>[s.raw.type==="divider"?(m(),h(ee,{key:0})):s.raw.type==="subheader"?(m(),h(ge,{key:1},{default:u(()=>[_(q(s.title),1)]),_:2},1024)):(m(),h(W,S({key:2},A,{disabled:s.raw.disabled}),null,16,["disabled"]))]),_:2},1032,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12",sm:"2"},{default:u(()=>[e(U,{items:p(V)(a.deviceType),label:"\u72B6\u6001","item-title":"title","item-value":"value",modelValue:a.valueType,"onUpdate:modelValue":s=>a.valueType=s,required:""},{item:u(({item:s,props:A})=>[s.raw?(m(),h(W,ye(S({key:0},A)),null,16)):E("",!0)]),_:2},1032,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12",sm:"2"},{default:u(()=>[e(U,{items:a.valueType==0?[{title:"\u7B49\u4E8E",value:0}]:[{title:"\u5C0F\u4E8E",value:-1},{title:"\u7B49\u4E8E",value:0},{title:"\u5927\u4E8E",value:1}],"item-title":"title","item-value":"value",label:"\u6BD4\u8F83",modelValue:a.compare,"onUpdate:modelValue":s=>a.compare=s,modelModifiers:{lazy:!0},required:""},null,8,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),a.valueType==0?(m(),h(v,{key:0,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u5F00\u542F",value:!0},{title:"\u5173\u95ED",value:!1}],"item-title":"title","item-value":"value",label:"\u72B6\u6001",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0},required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==2&&a.deviceType=="tv"?(m(),h(v,{key:1,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u9891\u90531",value:1},{title:"\u9891\u90532",value:2},{title:"\u9891\u90533",value:3}],"item-title":"title","item-value":"value",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==2&&a.deviceType=="fan"?(m(),h(v,{key:2,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u5236\u51B7",value:1},{title:"\u5236\u70ED",value:2},{title:"\u9664\u6E7F",value:3}],"item-title":"title","item-value":"value",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==4&&a.deviceType=="light"?(m(),h(v,{key:3,cols:"12",sm:"2"},{default:u(()=>[e(Ce,{width:"100%",mode:"rgba","hide-inputs":"","show-swatches":"",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType!=0&&a.deviceType=="sensor"?(m(),h(v,{key:4,cols:"12",sm:"2"},{default:u(()=>[e(oe,{class:"ml-4","thumb-label":"",rounded:"",min:"0",max:"100",step:"0.1","onUpdate:modelValue":s=>w(s,B)},null,8,["onUpdate:modelValue"])]),_:2},1024)):a.valueType!=0?(m(),h(v,{key:5,cols:"12",sm:"2",class:"d-flex align-center"},{default:u(()=>[e(oe,{class:"ml-4","thumb-label":"",rounded:"",min:"0",max:"100",step:"1",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.compare==2?(m(),h(v,{key:6,cols:"12",sm:"2",class:"d-flex align-center"},{default:u(()=>[e(oe,{"thumb-label":"",class:"ml-4",rounded:"",min:"0",max:"100",step:"1",modelValue:a.value2,"onUpdate:modelValue":s=>a.value2=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0)],64)):E("",!0),a.type==1?(m(),G(z,{key:1},[e(v,null,{default:u(()=>[e(U,{items:[{title:"\u5C0F\u4E8E",value:-1},{title:"\u7B49\u4E8E",value:0},{title:"\u5927\u4E8E",value:1}],"item-title":"title","item-value":"value",label:"\u6BD4\u8F83",modelValue:a.compare,"onUpdate:modelValue":s=>a.compare=s,modelModifiers:{lazy:!0},required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,null,{default:u(()=>[e(le,{type:"time","onUpdate:modelValue":s=>b(s,B)},null,8,["onUpdate:modelValue"])]),_:2},1024),a.compare==2?(m(),h(v,{key:0},{default:u(()=>[e(le,{type:"time","onUpdate:modelValue":s=>T(s,B)},null,8,["onUpdate:modelValue"])]),_:2},1024)):E("",!0)],64)):E("",!0),B==p(o).condition.conditions.length-1&&B>0?(m(),h(v,{key:2,cols:"1"},{default:u(()=>[e(O,{icon:"mdi-minus",onClick:s=>p(o).condition.conditions.pop()},null,8,["onClick"])]),_:2},1024)):E("",!0),B==p(o).condition.conditions.length-1?(m(),h(v,{key:3,cols:"1"},{default:u(()=>[e(O,{icon:"mdi-plus",onClick:s=>p(o).condition.conditions.push({})},null,8,["onClick"])]),_:2},1024)):E("",!0)]),_:2},1024))),128))]),_:1}),p(o).condition.conditions.length>1?(m(),h(x,{key:0},{default:u(()=>[e(v,{cols:"auto",class:"d-flex align-center"},{default:u(()=>[_(" \u4EE5\u4E0A\u6761\u4EF6 ")]),_:1}),e(v,{cols:"3",class:"font-weight-bold"},{default:u(()=>[e(U,{items:[{title:"\u540C\u65F6\u6EE1\u8DB3",value:"and"},{title:"\u4EFB\u4E00\u6EE1\u8DB3",value:"or"}],modelValue:p(o).condition.mode,"onUpdate:modelValue":n[2]||(n[2]=a=>p(o).condition.mode=a),"item-title":"title","item-value":"value",density:"compact",required:""},null,8,["modelValue"])]),_:1}),e(v,{class:"d-flex align-center"},{default:u(()=>[_(" \u65F6\u6267\u884C ")]),_:1})]),_:1})):E("",!0),e(ee),e(x,null,{default:u(()=>[e(v,{cols:"12",class:"font-weight-bold"},{default:u(()=>[_(" \u64CD\u4F5C: ")]),_:1}),e(J,null,{default:u(()=>[(m(!0),G(z,null,ae(p(o).actions,(a,B)=>(m(),h(x,{key:a.id},{default:u(()=>[e(v,{cols:"12",sm:"3"},{default:u(()=>[e(U,{items:p(D),"item-title":"describe","item-value":"id",label:"\u9009\u62E9\u8BBE\u5907",modelValue:a.deviceID,"onUpdate:modelValue":[s=>a.deviceID=s,s=>t(a.deviceID,B)],required:""},{item:u(({item:s,props:A})=>[s.raw.type==="divider"?(m(),h(ee,{key:0})):s.raw.type==="subheader"?(m(),h(ge,{key:1},{default:u(()=>[_(q(s.title),1)]),_:2},1024)):(m(),h(W,S({key:2},A,{disabled:s.raw.disabled}),null,16,["disabled"]))]),_:2},1032,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),e(v,{cols:"12",sm:"3"},{default:u(()=>[e(U,{items:p(d)(a.deviceType),label:"\u72B6\u6001","item-title":"title","item-value":"value",modelValue:a.valueType,"onUpdate:modelValue":s=>a.valueType=s,required:""},{item:u(({item:s,props:A})=>[s.raw?(m(),h(W,ye(S({key:0},A)),null,16)):E("",!0)]),_:2},1032,["items","modelValue","onUpdate:modelValue"])]),_:2},1024),a.valueType==0?(m(),h(v,{key:0,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u5F00\u542F",value:!0},{title:"\u5173\u95ED",value:!1}],"item-title":"title","item-value":"value",label:"\u72B6\u6001",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0},required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==2&&a.deviceType=="tv"?(m(),h(v,{key:1,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u9891\u90531",value:1},{title:"\u9891\u90532",value:2},{title:"\u9891\u90533",value:3}],"item-title":"title","item-value":"value",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==2&&a.deviceType=="fan"?(m(),h(v,{key:2,cols:"12",sm:"2"},{default:u(()=>[e(U,{items:[{title:"\u5236\u51B7",value:1},{title:"\u5236\u70ED",value:2},{title:"\u9664\u6E7F",value:3}],"item-title":"title","item-value":"value",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s,modelModifiers:{lazy:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==4&&a.deviceType=="light"?(m(),h(v,{key:3,cols:"12",sm:"2"},{default:u(()=>[e(Ce,{width:"100%",mode:"rgba","hide-inputs":"","show-swatches":"",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),a.valueType==1?(m(),h(v,{key:4,cols:"12",sm:"2",class:"d-flex align-center"},{default:u(()=>[e(oe,{class:"ml-4",rounded:"","thumb-label":"",min:"0",max:"100",step:"1",modelValue:a.value,"onUpdate:modelValue":s=>a.value=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):E("",!0),B==p(o).actions.length-1&&B>0?(m(),h(v,{key:5,cols:"1"},{default:u(()=>[e(O,{icon:"mdi-minus",onClick:n[3]||(n[3]=s=>p(o).actions.pop())})]),_:1})):E("",!0),B==p(o).actions.length-1?(m(),h(v,{key:6,cols:"1"},{default:u(()=>[e(O,{icon:"mdi-plus",onClick:n[4]||(n[4]=s=>p(o).actions.push({}))})]),_:1})):E("",!0)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(Ae,null,{default:u(()=>[e(Fl),e(O,{color:"blue-darken-1",variant:"text",onClick:n[5]||(n[5]=a=>y.$emit("closeDialog"))},{default:u(()=>[_(" \u5173\u95ED ")]),_:1}),e(O,{color:"blue-darken-1",variant:"text",onClick:N},{default:u(()=>[_(" \u4FDD\u5B58\u89C4\u5219 ")]),_:1})]),_:1})]),_:1})]),_:1}))}}),xl={name:""},Sl=de({...xl,setup(l){const g=j(!1),i=j(),f=j(0);i.value="new";const o=ve(),D=()=>{i.value="new",g.value=!0},F=c=>{f.value=c,i.value="edit",g.value=!0},t=()=>{g.value=!1};return(c,V)=>(m(),G(z,null,[e(J,null,{default:u(()=>[e(O,{onClick:D,color:"primary"},{default:u(()=>[_(" \u6DFB\u52A0\u65B0\u89C4\u5219 ")]),_:1})]),_:1}),e(Ul,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=d=>g.value=d),mode:p(i),index:f.value,onCloseDialog:t},null,8,["modelValue","mode","index"]),e(J,{class:"mx-0"},{default:u(()=>[e(x,null,{default:u(()=>[(m(!0),G(z,null,ae(p(o).automationRules.triggers,(d,b)=>(m(),h(v,{key:d.id,cols:"12",md:"6",lg:"4"},{default:u(()=>[e(Bl,{trigger:d,index:b,onShowEditDialog:F},null,8,["trigger","index"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}}),Nl=de({__name:"Auto",setup(l){return(g,i)=>(m(),h(Sl))}});export{Nl as default};
